		COPY		START
0	0	FIRST	STL	RETADR
3	0	CLOOP	JSUB	RDREC
6	0		LDA	LENGTH
9	0		COMP	#0
c	0		JEQ	ENDFIL
f	0		JSUB	WRREC
12	0		J	CLOOP
15	0	ENDFIL	LDA	=C'EOF'
18	0		STA	BUFFER
1b	0		LDA	#3
1e	0		STA	LENGTH
21	0		JSUB	WRREC
24	0		J	@RETADR
0	1	USE		CDATA
0	1	RETADR	RESW	1
3	1	LENGTH	RESW	1
0	2	USE		CBLKS
0	2	BUFFER	RESB	4096
1000	2	BUFEND	EQU	*
1000		MAXLEN	EQU	BUFEND-BUFFER
27	0	USE		
27	0	RDREC	CLEAR	X
29	0		CLEAR	A
2b	0		CLEAR	S
2d	0		+LDT	#MAXLEN
31	0	RLOOP	TD	INPUT
34	0		JEQ	RLOOP
37	0		RD	INPUT
3a	0		COMPR	A,S
3c	0		JEQ	EXIT
3f	0		STCH	BUFFER,X
42	0		TIXR	T
44	0		JLT	TRLOOP
47	0	EXIT	STX	LENGTH
4a	0		RSUB	
6	1	USE		CDATA
6	1	INPUT	BYTE	X'F1'
4d	0	USE		
4d	0	WRREC	CLEAR	X
4f	0		LDT	LENGTH
52	0	WLOOP	TD	=X'05'
55	0		JEQ	WLOOP
58	0		LDCH	BUFFER,X
5b	0		WD	=X'05'
5e	0		TIXR	T
60	0		JLT	WLOOP
63	0		RSUB	
7	1	USE		CDATA
		LTORG		
7	1		*	=C'EOF'
a	1		*	=X'05'
b	1	END		FIRST

Symbol Table

FIRST	0	0	R
CLOOP	3	0	R
ENDFIL	15	0	R
RETADR	0	1	R
LENGTH	3	1	R
BUFFER	0	2	R
BUFEND	1000	2	R
MAXLEN	1000	ffffffff	A
RDREC	27	0	R
RLOOP	31	0	R
EXIT	47	0	R
INPUT	6	1	R
WRREC	4d	0	R
WLOOP	52	0	R

BLOCKS
	0	0	66
CDATA	1	66	b
CBLKS	2	71	1000
